<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:views="clr-namespace:AutomacaoGDA.UI.Views"
        xmlns:vm="clr-namespace:AutomacaoGDA.UI.ViewModels"
        xmlns:models="clr-namespace:AutomacaoGDA.Core.Models;assembly=AutomacaoGDA.Core"
        x:Class="AutomacaoGDA.UI.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Width="1100"
        Height="720"
        Title="AutomacaoGDA">
  <Window.DataTemplates>
    <DataTemplate DataType="vm:ConfiguracoesViewModel">
      <views:ConfiguracoesView />
    </DataTemplate>
    <DataTemplate DataType="vm:DataCleanupViewModel">
      <views:DataCleanupView />
    </DataTemplate>
    <DataTemplate DataType="vm:ResetAcquisitionViewModel">
      <views:ResetAcquisitionView />
    </DataTemplate>
    <DataTemplate DataType="vm:StockCopyViewModel">
      <views:StockCopyView />
    </DataTemplate>
    <DataTemplate DataType="vm:CreditUploadViewModel">
      <views:CreditUploadView />
    </DataTemplate>
  </Window.DataTemplates>

  <Grid RowDefinitions="Auto,Auto,*" Margin="12">
    <Border Grid.Row="0" Padding="12" Background="#F2F2F2" CornerRadius="6">
      <Grid ColumnDefinitions="*,Auto" VerticalAlignment="Center">
        <StackPanel Orientation="Horizontal" Spacing="16" VerticalAlignment="Center">
          <StackPanel Orientation="Horizontal" Spacing="8" VerticalAlignment="Center">
            <TextBlock Text="Ambiente ativo:" VerticalAlignment="Center" />
            <ComboBox Width="220"
                      ItemsSource="{Binding AppState.Conexoes}"
                      SelectedItem="{Binding AppState.ConexaoSelecionada}">
              <ComboBox.ItemTemplate>
                <DataTemplate x:DataType="models:ConexaoConfig">
                  <TextBlock Text="{Binding Ambiente}" />
                </DataTemplate>
              </ComboBox.ItemTemplate>
            </ComboBox>
          </StackPanel>
          <StackPanel Orientation="Horizontal" Spacing="8" VerticalAlignment="Center">
            <TextBlock Text="Operacao:" VerticalAlignment="Center" />
            <ComboBox Width="360"
                      ItemsSource="{Binding AppState.Operacoes}"
                      SelectedItem="{Binding AppState.OperacaoSelecionada}">
              <ComboBox.ItemTemplate>
                <DataTemplate x:DataType="models:OperationInfo">
                  <TextBlock Text="{Binding DisplayName}" />
                </DataTemplate>
              </ComboBox.ItemTemplate>
            </ComboBox>
            <Button Content="Atualizar" Command="{Binding CarregarOperacoesCommand}" />
            <TextBlock Text="{Binding AppState.OperacoesStatus}" VerticalAlignment="Center" />
          </StackPanel>
        </StackPanel>
        <TextBlock Grid.Column="1"
                   Text="{Binding AppState.AmbienteSelecionado}"
                   FontWeight="Bold"
                   VerticalAlignment="Center" />
      </Grid>
    </Border>

    <TextBlock Grid.Row="1"
               Text="{Binding AppState.BancoStatusMensagem}"
               Foreground="#C81E1E"
               IsVisible="{Binding AppState.BancoStatusVisivel}"
               Margin="4,8,0,0" />

    <Grid Grid.Row="2" ColumnDefinitions="220,*" Margin="0,12,0,0">
      <Border Background="#F7F7F7" CornerRadius="8" Padding="12">
        <StackPanel Spacing="10">
          <TextBlock Text="Menu" FontSize="14" FontWeight="SemiBold" />
          <ListBox ItemsSource="{Binding Pages}" SelectedItem="{Binding SelectedPage}">
            <ListBox.Styles>
              <Style Selector="ListBoxItem">
                <Setter Property="Padding" Value="12,8" />
                <Setter Property="Margin" Value="0,2" />
              </Style>
              <Style Selector="ListBoxItem:selected">
                <Setter Property="Background" Value="#D9ECFF" />
                <Setter Property="FontWeight" Value="SemiBold" />
              </Style>
            </ListBox.Styles>
            <ListBox.ItemTemplate>
              <DataTemplate x:DataType="vm:NavigationItem">
                <TextBlock Text="{Binding Title}" />
              </DataTemplate>
            </ListBox.ItemTemplate>
          </ListBox>
        </StackPanel>
      </Border>

      <Border Grid.Column="1" Background="#FFFFFF" CornerRadius="8" Padding="12" Margin="12,0,0,0">
        <ContentControl Content="{Binding SelectedPage.ViewModel}" />
      </Border>
    </Grid>
  </Grid>
</Window>
